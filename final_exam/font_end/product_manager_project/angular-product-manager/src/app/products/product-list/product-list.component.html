<div class="container">
  <div class="row">
    <div class="form-group row">
      <input [formControl]="fromSearch" type="text" id="from" class="form-control mt-2 mb-2 col-4 ml-2 mr-2" placeholder="From">
      <input [formControl]="toSearch" type="text" id="to" class="form-control mt-2 mb-2 col-4  ml-2 mr-2" placeholder="To">
    </div>
    <div class="form-group row">
      <input [formControl]="dateSearch1" type="date" id="date1" class="form-control mt-2 mb-2 col-4 ml-2 mr-2" value=" ">
      <input [formControl]="dateSearch2" type="date" id="date2" class="form-control mt-2 mb-2 col-4  ml-2 mr-2" value=" ">
    </div>
    <div class="form-group row">
      <button class="btn btn-primary mb-2 mr-2 mt-2" (click)="searchAll()">Mixture</button>
      <button class="btn btn-primary mb-2 mr-2 mt-2" data-toggle="modal" data-target="#modelAddId"><i class="fa fa-plus"></i> Add New</button>
    </div>
  </div>
  <div class="table-responsive table-hover table-inverse">
    <table class="table">
      <thead class="thead-inverse">
      <tr>
        <th>#</th>
        <th>From</th>
        <th>To</th>
        <th>Price</th>
        <th>Date Start</th>
        <th>Time</th>
        <th>Catalog</th>
        <th>Amount</th>
        <th>Action</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let product of products | paginate : { itemsPerPage: 3, currentPage: p }">
        <td>{{product.idProduct}}</td>
        <td>{{product.fromPlace}}</td>
        <td>{{product.toPlace}}</td>
        <td>{{product.price | currency}}</td>
        <td>{{product.dateStart}}</td>
        <td>{{product.timeStart}}</td>
        <td>{{product.catalog.nameCatalog}}</td>
        <td>{{product.amount}}</td>
        <td>
          <a class="btn btn-primary w-25 btn-sm ml-1 mr-1"
             routerLink="/products/list/order/{{product.idProduct}}"
             data-toggle="modal" data-target="#modelOrderId">Order</a>
          <a class="btn btn-warning w-25 btn-sm ml-1 mr-1"
             routerLink="/products/list/edit/{{product.idProduct}}"
             data-toggle="modal" data-target="#modelEditId">Edit</a>
          <a class="btn btn-danger w-25 btn-sm ml-1 mr-1"
             routerLink="/products/list/delete/{{product.idProduct}}"
             data-toggle="modal" data-target="#modelDeleteId">Delete</a>
        </td>
      </tr>
      </tbody>
    </table>
  </div>
  <div style="justify-content: space-around;display: flex;">
    <pagination-controls (pageChange)="p = $event" class=" page-item"></pagination-controls>
  </div>
</div>

<!-- Modal Order -->
<div class="modal fade" id="modelOrderId" tabindex="-1" role="dialog" aria-labelledby="modelTitleId"
     aria-hidden="true">
  <router-outlet></router-outlet>
</div>

<!-- Modal delete -->
<div class="modal fade" id="modelDeleteId" tabindex="-1" role="dialog" aria-labelledby="modelTitleId"
     aria-hidden="true">
  <router-outlet></router-outlet>
</div>

<!-- Modal Edit -->
<div class="modal fade" id="modelEditId" tabindex="-1" role="dialog" aria-labelledby="modelTitleId" aria-hidden="true">
  <router-outlet></router-outlet>
</div>

<!-- Modal Add -->
<div class="modal fade" id="modelAddId" tabindex="-1" role="dialog" aria-labelledby="modelTitleId" aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Add new ticket</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="container">
          <form [formGroup]="formProduct" autocomplete="off">
            <div class="form-group row">
              <label for="name-add">From: </label>
              <input type="text" formControlName="fromPlace" id="name-add" class="form-control"
                     placeholder="From"
                     aria-describedby="helpNameId">
              <small id="helpNameId" class="text-muted d-block w-100">Not special symbol or number</small>
              <div class="text-danger"
                   *ngIf="formProduct.controls.fromPlace.invalid
                     && (formProduct.controls.fromPlace.touched || formProduct.controls.fromPlace.dirty)">
                <p class="m-0" *ngIf="formProduct.controls.fromPlace.hasError('required')">
                  Please input a place!
                </p>
              </div>
            </div>
            <div class="form-group row">
              <label for="description-add">To: </label>
              <input type="text" formControlName="toPlace" id="description-add" class="form-control"
                     placeholder="To"
                     aria-describedby="helpAmountId">
              <small id="helpAmountId" class="text-muted w-100">A place haven't special symbol</small>
              <div class="text-danger"
                   *ngIf="formProduct.controls.toPlace.invalid
                     && (formProduct.controls.toPlace.touched || formProduct.controls.toPlace.dirty)">
                <p class="m-0" *ngIf="formProduct.controls.toPlace.hasError('required')">
                  Please input a place for ticket!
                </p>
              </div>
            </div>
            <div class="form-group row">
              <div class="col-6">
                <label for="price-add">Price: </label>
                <input type="number" formControlName="price" id="price-add" class="form-control"
                       placeholder="Price"
                       aria-describedby="helpAreaId">
                <small id="helpAreaId" class="text-muted">Price bigger than zero</small>
                <div class="text-danger"
                     *ngIf="formProduct.controls.price.invalid
                     && (formProduct.controls.price.touched || formProduct.controls.price.dirty)">
                  <p class="m-0" *ngIf="formProduct.controls.price.hasError('required')">
                    Please input price of ticket!
                  </p>
                </div>
                <div class="text-danger"
                     *ngIf="formProduct.controls.price.invalid
                     && (formProduct.controls.price.touched || formProduct.controls.price.dirty)">
                  <p class="m-0" *ngIf="formProduct.controls.price.hasError('min')">
                    Please input price of ticket bigger than 0!
                  </p>
                </div>
              </div>
              <div class="col-6">
                <label for="chiPhi-add">Amount: </label>
                <input type="number" formControlName="amount" id="chiPhi-add" class="form-control"
                       placeholder="Amount"
                       aria-describedby="helpCostId">
                <small id="helpCostId" class="text-muted">The Amount of ticket bigger than zero</small>
                <div class="text-danger"
                     *ngIf="formProduct.controls.amount.invalid
                     && (formProduct.controls.amount.touched || formProduct.controls.amount.dirty)">
                  <p class="m-0" *ngIf="formProduct.controls.amount.hasError('required')">
                    Please input amount of ticket!
                  </p>
                </div>
                <div class="text-danger"
                     *ngIf="formProduct.controls.amount.invalid
                     && (formProduct.controls.amount.touched || formProduct.controls.amount.dirty)">
                  <p class="m-0" *ngIf="formProduct.controls.amount.hasError('min')">
                    Please input amount of ticket bigger than zero!
                  </p>
                </div>
              </div>
            </div>
            <div class="form-group row">
              <label for="date-add">Date start: </label>
              <input type="date" formControlName="dateStart" id="date-add" class="form-control">
              <div class="text-danger"
                   *ngIf="formProduct.controls.dateStart.invalid
                     && (formProduct.controls.dateStart.touched || formProduct.controls.dateStart.dirty)">
                <p class="m-0" *ngIf="formProduct.controls.dateStart.hasError('required')">
                  Please select date to start!
                </p>
              </div>
              <div class="text-danger"
                   *ngIf="formProduct.controls.dateStart.invalid
                     && (formProduct.controls.dateStart.touched || formProduct.controls.dateStart.dirty)">
                <p class="m-0" *ngIf="formProduct.controls.dateStart.hasError('validateDay')">
                  Please select date to start bigger one day than current day!
                </p>
              </div>
            </div>
            <div class="form-group row">
              <label for="status-add">Time: </label>
              <input type="time" formControlName="timeStart" id="status-add" class="form-control"
                     placeholder="Time">
              <div class="text-danger"
                   *ngIf="formProduct.controls.timeStart.invalid
                     && (formProduct.controls.timeStart.touched || formProduct.controls.timeStart.dirty)">
                <p class="m-0" *ngIf="formProduct.controls.timeStart.hasError('required')">
                  Please input time to start!
                </p>
              </div>
            </div>
            <div class="form-group row">
              <label for="catalog-add">Catalog: </label>
              <select name="catalog" formControlName="catalog" class="form-control" id="catalog-add">
                <option value="">-----Select-----</option>
                <option *ngFor="let catalog of catalogs" [ngValue]="catalog">{{catalog.nameCatalog}}</option>
              </select>
              <div class="text-danger"
                   *ngIf="formProduct.controls.catalog.invalid
                     && (formProduct.controls.catalog.touched || formProduct.controls.catalog.dirty)">
                <p class="m-0" *ngIf="formProduct.controls.catalog.hasError('required')">
                  Please choose catalog of ticket!
                </p>
              </div>
            </div>
          </form>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary" [disabled]="formProduct.invalid" (click)="addNewProduct()"
                data-dismiss="modal">Save
        </button>
      </div>
    </div>
  </div>
</div>


